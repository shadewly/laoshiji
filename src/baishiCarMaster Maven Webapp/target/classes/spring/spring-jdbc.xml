<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="   
          http://www.springframework.org/schema/beans   
          http://www.springframework.org/schema/beans/spring-beans-4.2.4.xsd   
          http://www.springframework.org/schema/tx   
          http://www.springframework.org/schema/tx/spring-tx-4.2.4.xsd  
          http://www.springframework.org/schema/context   
          http://www.springframework.org/schema/context/spring-context-4.2.4.xsd   
          http://www.springframework.org/schema/aop   
          http://www.springframework.org/schema/aop/spring-aop-4.2.4.xsd">

	<!-- é…ç½®DataSourceæ•°æ®æº?start -->
	<bean id="carMasterDataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
		destroy-method="close">
		<property name="driverClass" value="${car_master.driverclass}"></property>
		<property name="jdbcUrl" value="${car_master.jdbcurl}"></property>
		<property name="user" value="${car_master.user}"></property>
		<property name="password" value="${car_master.password}"></property>
		<property name="acquireIncrement" value="5"></property>  <!-- å½“è¿žæŽ¥æ± ä¸­çš„è¿žæŽ¥ç”¨å®Œæ—¶ï¼ŒC3P0ä¸?¬¡æ€§åˆ›å»ºæ–°è¿žæŽ¥çš„æ•°ç›? -->
		<property name="initialPoolSize" value="10"></property>  <!-- åˆå§‹åŒ–æ—¶åˆ›å»ºçš„è¿žæŽ¥æ•°ï¼Œå¿…é¡»åœ¨minPoolSizeå’ŒmaxPoolSizeä¹‹é—´ -->
		<property name="minPoolSize" value="5"></property>
		<property name="maxPoolSize" value="20"></property>
		<!-- æœ?¤§ç©ºé—²æ—¶é—´ï¼Œè¶…è¿‡ç©ºé—²æ—¶é—´çš„è¿žæŽ¥å°†è¢«ä¸¢å¼ƒ [éœ?¦æ³¨æ„ï¼šmysqlé»˜è®¤çš„è¿žæŽ¥æ—¶é•¿ä¸º8å°æ—¶(28800ï¼‰ã?å¯åœ¨my.iniä¸­æ·»åŠ?wait_timeout=30(å•ä½ç§?è®¾ç½®è¿žæŽ¥è¶…æ—¶ã€?è¿™é‡Œè®¾ç½®c3p0çš„è¶…æ—¶å¿…é¡?28800] -->
		<property name="maxIdleTime" value="300"></property>
		<property name="idleConnectionTestPeriod" value="60"></property> <!-- æ¯?0ç§’æ£€æŸ¥è¿žæŽ¥æ± ä¸­çš„ç©ºé—²è¿žæŽ¥ -->
		<property name="maxStatements" value="20"></property>  <!-- jdbcçš„æ ‡å‡†å‚æ•?ç”¨ä»¥æŽ§åˆ¶æ•°æ®æºå†…åŠ è½½çš„PreparedStatementæ•°é‡ï¼Œä½†ç”±äºŽé¢„ç¼“å­˜çš„Statementå±?äºŽå•ä¸ªConnectionè€Œä¸æ˜¯æ•´ä¸ªè¿žæŽ?-->
	</bean>

	<!-- é…ç½®DataSourceæ•°æ®æº?end -->

	<!-- é…ç½®SqlSessionFactoryBean -->
	<bean id="sessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
		<property name="dataSource" ref="carMasterDataSource" />
		<property name="configLocation" value="classpath*:mybatis.xml" />
		<!-- mapperå’Œresultmapé…ç½®è·¯å¾„ -->
		<property name="mapperLocations">
			<list>
				<value>classpath:com/mapper/*.xml</value>
				<!-- è¡¨ç¤ºåœ¨com.hoo.resultmapåŒ…æˆ–ä»¥ä¸‹æ‰?œ‰ç›®å½•ä¸­ï¼Œä»?resultmap.xmlç»“å°¾æ‰?œ‰æ–‡ä»¶ -->
				<!-- <value>classpath:com/hoo/resultmap/**/*-resultmap.xml</value> <value>classpath:com/hoo/entity/*-resultmap.xml</value> 
					<value>classpath:com/hoo/mapper/**/*-mapper.xml</value> -->
			</list>
		</property>
	</bean>

	<!-- é…ç½®è‡ªå®šä¹‰çš„SqlSessionTemplateæ¨¡æ¿ï¼Œæ³¨å…¥ç›¸å…³é…ç½?-->
	<bean id="sqlSessionTemplate"
		class="com.core.mybatis.CustomSqlSessionTemplate">
		<constructor-arg ref="sessionFactory" />
		<property name="targetSqlSessionFactorys">
			<map>
				<entry value-ref="sessionFactory" key="carMaster" />
			</map>
		</property>
	</bean>

	<!-- é€šè¿‡æ‰«æçš„æ¨¡å¼ï¼Œæ‰«æç›®å½•åœ¨com/hoo/mapperç›®å½•ä¸‹ï¼Œæ‰?œ‰çš„mapperéƒ½ç»§æ‰¿SqlMapperæŽ¥å£çš„æŽ¥å£ï¼Œ è¿™æ ·ä¸?¸ªbeanå°±å¯ä»¥äº† -->
	<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
		<property name="basePackage" value="com" />
		<property name="sqlSessionTemplateBeanName" value="sqlSessionTemplate" />
		<property name="markerInterface" value="com.core.mybatis.SqlMapper" />
	</bean>

</beans>